-- =============================================
-- Dunnage Database Foundation - Seed Data
-- Feature: 004-database-foundation
-- Description: Populates 11 default dunnage types with standard specification schemas
-- MySQL Version: 5.7.24+
-- =============================================

-- =============================================
-- Seed Dunnage Types
-- =============================================

INSERT IGNORE INTO dunnage_types (DunnageType, EntryDate, EntryUser, AlterDate, AlterUser) VALUES
('Pallet', NOW(), 'SYSTEM', NULL, NULL),
('Crate', NOW(), 'SYSTEM', NULL, NULL),
('Box', NOW(), 'SYSTEM', NULL, NULL),
('Skid', NOW(), 'SYSTEM', NULL, NULL),
('Foam', NOW(), 'SYSTEM', NULL, NULL),
('Shrink Wrap', NOW(), 'SYSTEM', NULL, NULL),
('Bubble Wrap', NOW(), 'SYSTEM', NULL, NULL),
('Gaylord', NOW(), 'SYSTEM', NULL, NULL),
('Foldable Crate', NOW(), 'SYSTEM', NULL, NULL),
('Wooden Crate', NOW(), 'SYSTEM', NULL, NULL),
('Plastic Totes', NOW(), 'SYSTEM', NULL, NULL);

-- =============================================
-- Seed Default Specification Schemas
-- All dimensional measurements in inches
-- =============================================

-- Default spec schema for all types (Width, Height, Depth in inches, IsInventoriedToVisual flag)
INSERT IGNORE INTO dunnage_specs (DunnageTypeID, DunnageSpecs, SpecAlterDate, SpecAlterUser)
SELECT 
    ID,
    JSON_OBJECT(
        'Width', JSON_OBJECT('type', 'number', 'unit', 'inches', 'required', true),
        'Height', JSON_OBJECT('type', 'number', 'unit', 'inches', 'required', true),
        'Depth', JSON_OBJECT('type', 'number', 'unit', 'inches', 'required', true),
        'IsInventoriedToVisual', JSON_OBJECT('type', 'boolean', 'required', true)
    ),
    NOW(),
    'SYSTEM'
FROM dunnage_types
WHERE DunnageType IN (
    'Pallet', 'Crate', 'Box', 'Skid', 'Foam', 'Shrink Wrap', 
    'Bubble Wrap', 'Gaylord', 'Foldable Crate', 'Wooden Crate', 'Plastic Totes'
);

-- =============================================
-- Verification Queries (for manual testing)
-- =============================================
-- SELECT COUNT(*) AS type_count FROM dunnage_types;
-- SELECT COUNT(*) AS spec_count FROM dunnage_specs;
-- 
-- SELECT 
--     dt.ID,
--     dt.DunnageType,
--     ds.DunnageSpecs,
--     dt.EntryDate,
--     dt.EntryUser
-- FROM dunnage_types dt
-- JOIN dunnage_specs ds ON dt.ID = ds.DunnageTypeID
-- ORDER BY dt.ID;
