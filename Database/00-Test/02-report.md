# Stored Procedure Execution Test Report

**Generated:** 2026-01-11 18:38:57
**Database:** mtm_receiving_application
**Server:** localhost:3306
**Execution Mode:** Alphabetical

## Summary

| Metric                     | Count              | Percentage           |
| -------------------------- | ------------------ | -------------------- |
| **Total Tests**            | 149    | 100%                 |
| **Passed**                 | 141         | 94.6%    |
| **Failed**                 | 8         | 5.4%       |
| Schema Broken              | 0  | 0%     |
| Runtime Errors             | 8 | 5.4%    |
| Constraint Violations      | 0    | 0% |
| Business Logic Validations | 0   | 0%      |

## Results by Category

| Category | Total | Passed | Failed | Success Rate |
|----------|-------|--------|--------|--------------|
| Departments | 1 | 1 | 0 | 100% |
| DunnageParts | 9 | 9 | 0 | 100% |
| DunnageSpecs | 9 | 9 | 0 | 100% |
| DunnageTypes | 11 | 10 | 1 | 90.9% |
| Other | 45 | 41 | 4 | 91.1% |
| PackageTypes | 9 | 9 | 0 | 100% |
| Preferences | 4 | 4 | 0 | 100% |
| ReceivingLines | 1 | 1 | 0 | 100% |
| ReceivingLoads | 4 | 4 | 0 | 100% |
| RoutingLabels | 9 | 9 | 0 | 100% |
| RoutingReasons | 1 | 1 | 0 | 100% |
| RoutingRecipients | 6 | 6 | 0 | 100% |
| Settings | 34 | 31 | 3 | 91.2% |
| VolvoShipments | 6 | 6 | 0 | 100% |

## üî¥ Critical Failures (Schema Broken)

These stored procedures reference columns or tables that don't exist in the database.

| SP Name | Error Code | Message | IN Params | OUT Params |
| ------- | ---------- | ------- | --------- | ---------- |
| - | - | No schema errors | - | - |

## ‚ö†Ô∏è Parameter Mismatches

No parameter mismatches detected

## üîó Constraint Violations

These stored procedures failed due to foreign key constraints (missing prerequisite data).

| SP Name | Message |
|---------|---------|
| sp_Dunnage_Inventory_Insert | Exception calling "ExecuteReader" with "0" argument(s): "Cannot add or update a child row: a foreign key constraint fails (`mtm_receiving_application`.`dunnage_requires_inventory`, CONSTRAINT `FK_dunnage_requires_inventory_part_id` FOREIGN KEY (`part_id`) REFERENCES `dunnage_parts` (`part_id`) ON DELETE CASCADE)" |
| sp_Dunnage_Loads_Insert | Exception calling "ExecuteReader" with "0" argument(s): "Cannot add or update a child row: a foreign key constraint fails (`mtm_receiving_application`.`dunnage_history`, CONSTRAINT `FK_dunnage_history_part_id` FOREIGN KEY (`part_id`) REFERENCES `dunnage_parts` (`part_id`))" |
| sp_Settings_User_Set | Exception calling "ExecuteReader" with "0" argument(s): "Cannot add or update a child row: a foreign key constraint fails (`mtm_receiving_application`.`settings_personal`, CONSTRAINT `settings_personal_ibfk_1` FOREIGN KEY (`setting_id`) REFERENCES `settings_universal` (`id`) ON DELETE CASCADE)" |
| sp_Volvo_PartComponent_Insert | Exception calling "ExecuteReader" with "0" argument(s): "Cannot add or update a child row: a foreign key constraint fails (`mtm_receiving_application`.`volvo_part_components`, CONSTRAINT `fk_volvo_part_components_parent` FOREIGN KEY (`parent_part_number`) REFERENCES `volvo_masterdata` (`part_number`) ON DELETE CAS)" |
| sp_Volvo_ShipmentLine_Insert | Exception calling "ExecuteReader" with "0" argument(s): "Cannot add or update a child row: a foreign key constraint fails (`mtm_receiving_application`.`volvo_line_data`, CONSTRAINT `volvo_line_data_ibfk_2` FOREIGN KEY (`part_number`) REFERENCES `volvo_masterdata` (`part_number`))" |

**Recommendation:** Run with `-UseExecutionOrder` flag or add prerequisite test data.

## üìã Data Validation Errors

These stored procedures failed due to data validation issues.

| SP Name | Message |
|---------|---------|
| sp_Dunnage_Types_Update | Exception calling "ExecuteReader" with "0" argument(s): "Dunnage type name already exists" |

**Recommendation:** Review mock data values in `01-mock-data.json`.

## üîß Other Runtime Errors

| SP Name | Category | Message |
|---------|----------|---------|
| sp_Settings_System_ResetToDefault | RuntimeError | Exception calling "ExecuteReader" with "0" argument(s): "Setting not found" |
| sp_Settings_System_UpdateValue | RuntimeError | Exception calling "ExecuteReader" with "0" argument(s): "Setting not found" |

## üí° Recommendations

### Improve Test Data

- 5 stored procedure(s) failed due to missing FK references
- Use dependency-aware execution: `pwsh -File .\Database\00-Test\02-Test-StoredProcedures.ps1 -UseExecutionOrder`
- Or add prerequisite test data to the database

### Good Progress

- 94.6% success rate
- Focus on fixing the 8 remaining issues

## Test Configuration

- **Mock Data File:** Loaded
- **Execution Order File:** Loaded
- **Using Execution Order:** No

---

**Report Generated By:** 02-Test-StoredProcedures.ps1

**Next Steps:**

1. Fix critical schema issues first (red flags above)
2. Regenerate mock data if parameter mismatches exist
3. Run with `-UseExecutionOrder` flag to reduce FK constraint errors
4. Review and customize mock data values in `01-mock-data.json`
